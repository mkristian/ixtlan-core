<h1>Listing <%= plural_table_name %></h1>

<table>
  <tr>
<% for attribute in attributes -%>
    <th><%= attribute.human_name %></th>
<% end -%>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<%% @<%= plural_table_name %>.each do |<%= singular_table_name %>| %>
  <tr>
<% for attribute in attributes -%>
    <td><%%= <%= singular_table_name %>.<%= attribute.name %> %></td>
<% end -%>
<% if defined? ::Ixtlan::Guard -%>
<%% if allowed?(:<%= table_name %>, :show) %>
<% end -%>
    <td><%%= link_to 'Show', <%= singular_table_name %> %></td>
<% if defined? ::Ixtlan::Guard -%>
<%% end %>
<%% if allowed?(:<%= table_name %>, :update) %>
<% end -%>
    <td><%%= link_to 'Edit', edit_<%= singular_table_name %>_path(<%= singular_table_name %>) %></td>
<% if defined? ::Ixtlan::Guard -%>
<%% end %>
<%% if allowed?(:<%= table_name %>, :destroy) %>
<% end -%>
    <td><% if options[:optimistic] && options[:timestamps] -%>
<%%= link_to 'Destroy', <%= singular_table_name %>_path(<%= singular_table_name %>) + "?<%= singular_table_name %>[updated_at]=#{<%= singular_table_name %>.updated_at.utc.strftime('%Y-%m-%d %H:%M:%S') + ("%06d" % <%= singular_table_name %>.updated_at.utc)}", :confirm => 'Are you sure?', :method => :delete %><% else -%><%%= link_to 'Destroy', <%= singular_table_name %>, :confirm => 'Are you sure?', :method => :delete %>
<% end -%></td>
<% if defined? ::Ixtlan::Guard -%>
<%% end %>
<% end -%>
  </tr>
<%% end %>
</table>

<br />

<% if defined? ::Ixtlan::Guard -%>
<%% if allowed?(:<%= table_name %>, :create) %>
<% end -%>
<%%= link_to 'New <%= human_name %>', new_<%= singular_table_name %>_path %>
<% if defined? ::Ixtlan::Guard -%>
<%% end %>
<% end -%>
